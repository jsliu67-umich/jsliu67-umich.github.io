{"ast":null,"code":"var _jsxFileName = \"/Users/jsliu/Desktop/dining-hall-app/src/components/GetMenuForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useInput } from './input-hook';\nimport { getMenus } from '../utils/requests';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function GetMenuForm(props) {\n  _s();\n\n  // const { value: diningHall, bind: bindDiningHall, reset: resetDiningHall } = useInput('');\n  // const { value: date, bind: bindDate, reset: resetDate } = useInput('');\n  // const { value: meal, bind: bindMeal, reset: resetMeal } = useInput('');\n  const [diningHall, setDiningHall] = useState('Bursley');\n  const [date, setDate] = useState('');\n  const [meal, setMeal] = useState('Breakfast');\n  const [firstMount, setFirstMount] = useState(0);\n  const [menus, setMenus] = useState({} // [{\n  //     category: [{\n  //         name: \"\",\n  //         menuItem: [\n  //             {\n  //                 name: \"\",\n  //                 itemSizes: [{\n  //                     nutritionalInfo: [\n  //                         {\n  //                             name: \"\",\n  //                             value: \"\"\n  //                         }\n  //                     ]\n  //                 }]\n  //             }\n  //         ]\n  //     }, {}\n  //     ]\n  // }]\n  );\n  useEffect(() => {\n    console.log(1);\n    console.log(menus);\n\n    if (firstMount < 1) {\n      setFirstMount(firstMount + 1);\n      let date = new Date(); // var formatedDate = `${date.getMonth()+1}-${date.getDate()}-${date.getFullYear()}`\n\n      let currMonth = date.getMonth() + 1;\n      let currDate = date.getDate();\n      currMonth = currMonth <= 9 ? `0{currMonth}` : `{currMonth}`;\n      currMonth = currMonth <= 9 ? `0{currMonth}` : `{currMonth}`;\n      let formatedDate = `${date.getFullYear()}-0${date.getMonth() + 1}-0${date.getDate()}`;\n      console.log(formatedDate);\n      setDate(formatedDate);\n      return;\n    } else {\n      console.log(2);\n      updateMenus();\n    }\n  }, [menus]);\n\n  const handleDiningHallChange = event => {\n    setDiningHall(event.target.value);\n  };\n\n  const handleDateChange = event => {\n    setDate(event.target.value);\n  };\n\n  const handleMealChange = event => {\n    setMeal(event.target.value);\n  };\n\n  const handleSubmit = evt => {\n    evt.preventDefault(); // alert(`Submitting Name ${value}`);\n    // resetDiningHall();\n    // resetDate();\n    // resetMeal();\n  };\n\n  const fetchMenus = async (diningHall, date, meal) => {\n    diningHall = diningHall.replace(' ', '%20');\n    meal = meal.toUpperCase();\n    console.log(diningHall);\n    console.log(date);\n    console.log(meal); // getMenus(diningHall, date, meal, setMenus)\n\n    console.log(menus);\n    const data = await getMenus(diningHall, date, meal);\n    await setMenus(data);\n  };\n\n  const updateMenus = () => {\n    // tempFoodDisplay = {}\n    let tempFoodDisplay = {};\n    let tempFoodAmounts = {};\n    let tempFoodFacts = {};\n    console.log(menus);\n\n    if (!('category' in menus[0])) {\n      props.setValidMenu(false);\n      props.onFoodHandler({}, {}, {});\n      return;\n    }\n\n    props.setValidMenu(true);\n    menus[0].category.map((categoryItem, index) => {\n      // foodAmounts[categoryItem.name] = 0\n      let tempCategoryObject = {};\n      let tempFoodFactsSingle = {};\n      tempCategoryObject[categoryItem.name] = [];\n      categoryItem.menuItem.map((menuItem, index) => {\n        const tempMenuItem = {};\n        tempMenuItem[menuItem.name] = 0;\n        tempFoodAmounts = { ...tempFoodAmounts,\n          ...tempMenuItem\n        };\n        tempCategoryObject[categoryItem.name].push(menuItem.name);\n        let foodFactsObject = {};\n        foodFactsObject[menuItem.name] = {};\n\n        if ('nutritionalInfo' in menuItem.itemSizes[0]) {\n          menuItem.itemSizes[0].nutritionalInfo.map((nutritionalItem, index) => {\n            // foodFactsObject[menuItem.name][\"Beef\"] = \"three\"\n            // console.log(nutritionalItem.value)\n            // let includeItem = false\n            if (nutritionalItem.name === \"Calories\") {\n              // console.log(nutritionalItem.value)\n              // includeItem = true\n              foodFactsObject[menuItem.name][nutritionalItem.name] = nutritionalItem.value;\n            } else if (nutritionalItem.name === \"Protein\") {\n              // includeItem = true\n              foodFactsObject[menuItem.name][nutritionalItem.name] = nutritionalItem.value;\n            } else if (nutritionalItem.name === \"Total Carbohydrate\") {\n              // includeItem = true\n              foodFactsObject[menuItem.name][nutritionalItem.name] = nutritionalItem.value;\n            } else if (nutritionalItem.name === \"Total Fat\") {\n              // includeItem = true\n              foodFactsObject[menuItem.name][nutritionalItem.name] = nutritionalItem.value;\n            } // foodFacts[menuItem.name][nutritionalItem.name] = nutritionalItem.value\n            // const newFoodFacts = {\n            //     ...foodFacts,\n            //     ...(includeItem && {\"three\": nutritionalItem['value']})\n            // }\n            // foodFacts = newFoodFacts\n\n          });\n          tempFoodFactsSingle = { ...tempFoodFactsSingle,\n            ...foodFactsObject\n          };\n        } else {\n          console.log(`${menuItem.name} is missing nutrition facts`);\n        } // setFoodFacts({...foodFacts, ...foodFactsObject})\n\n      });\n      tempFoodFacts = { ...tempFoodFacts,\n        ...tempFoodFactsSingle\n      };\n      console.log(tempFoodFacts); // console.log(tempCategoryObject)\n\n      tempFoodDisplay = { ...tempFoodDisplay,\n        ...tempCategoryObject\n      };\n    });\n    props.onFoodHandler(tempFoodDisplay, tempFoodAmounts, tempFoodFacts);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"main-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Dining Hall:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          value: diningHall,\n          onChange: handleDiningHallChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            defaultValue: \"Bursley\",\n            children: \"Bursley\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"South Quad\",\n            children: \"South Quad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"East Quad\",\n            children: \"East Quad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Mosher Jordan\",\n            children: \"Mosher Jordan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Date:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: date,\n          onChange: handleDateChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Meal:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          value: meal,\n          onChange: handleMealChange,\n          className: \"custom-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Breakfast\",\n            children: \"Breakfast\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Brunch\",\n            children: \"Brunch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Lunch\",\n            children: \"Lunch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Linner\",\n            children: \"Linner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Dinner\",\n            children: \"Dinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"buttons\",\n      onClick: () => fetchMenus(diningHall, date, meal),\n      children: \"Generate Menu\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 9\n  }, this);\n}\n\n_s(GetMenuForm, \"Z43XFA0TomHQWHcNk/Wf7Vlua1o=\");\n\n_c = GetMenuForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"GetMenuForm\");","map":{"version":3,"sources":["/Users/jsliu/Desktop/dining-hall-app/src/components/GetMenuForm.jsx"],"names":["React","useState","useEffect","useRef","useInput","getMenus","GetMenuForm","props","diningHall","setDiningHall","date","setDate","meal","setMeal","firstMount","setFirstMount","menus","setMenus","console","log","Date","currMonth","getMonth","currDate","getDate","formatedDate","getFullYear","updateMenus","handleDiningHallChange","event","target","value","handleDateChange","handleMealChange","handleSubmit","evt","preventDefault","fetchMenus","replace","toUpperCase","data","tempFoodDisplay","tempFoodAmounts","tempFoodFacts","setValidMenu","onFoodHandler","category","map","categoryItem","index","tempCategoryObject","tempFoodFactsSingle","name","menuItem","tempMenuItem","push","foodFactsObject","itemSizes","nutritionalInfo","nutritionalItem"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useInput } from './input-hook';\nimport { getMenus } from '../utils/requests'\n\nexport function GetMenuForm(props) {\n    // const { value: diningHall, bind: bindDiningHall, reset: resetDiningHall } = useInput('');\n    // const { value: date, bind: bindDate, reset: resetDate } = useInput('');\n    // const { value: meal, bind: bindMeal, reset: resetMeal } = useInput('');\n\n    const [diningHall, setDiningHall] = useState('Bursley')\n    const [date, setDate] = useState('')\n    const [meal, setMeal] = useState('Breakfast')\n\n    const [firstMount, setFirstMount] = useState(0)\n    const [menus, setMenus] = useState({}\n        // [{\n        //     category: [{\n        //         name: \"\",\n        //         menuItem: [\n        //             {\n        //                 name: \"\",\n        //                 itemSizes: [{\n        //                     nutritionalInfo: [\n        //                         {\n        //                             name: \"\",\n        //                             value: \"\"\n        //                         }\n        //                     ]\n        //                 }]\n        //             }\n        //         ]\n        //     }, {}\n        //     ]\n        // }]\n    );\n\n\n    useEffect(() => {\n        console.log(1)\n        console.log(menus)\n        if(firstMount < 1){\n            setFirstMount(firstMount + 1);\n            let date = new Date();\n\n            // var formatedDate = `${date.getMonth()+1}-${date.getDate()}-${date.getFullYear()}`\n            let currMonth = date.getMonth() + 1\n            let currDate = date.getDate()\n            currMonth = currMonth <= 9 ? `0{currMonth}` : `{currMonth}`\n            currMonth = currMonth <= 9 ? `0{currMonth}` : `{currMonth}`\n            let formatedDate = `${date.getFullYear()}-0${date.getMonth()+1}-0${date.getDate()}`\n            console.log(formatedDate)\n            setDate(formatedDate)\n            return;\n        }\n        else{\n            console.log(2)\n            updateMenus();\n        }\n    }, [menus]);\n\n    const handleDiningHallChange = (event) => {\n        setDiningHall(event.target.value);\n    };\n    const handleDateChange = (event) => {\n        setDate(event.target.value);\n    };\n    const handleMealChange = (event) => {\n        setMeal(event.target.value);\n    };\n    \n    const handleSubmit = (evt) => {\n        evt.preventDefault();\n        // alert(`Submitting Name ${value}`);\n        // resetDiningHall();\n        // resetDate();\n        // resetMeal();\n    }\n\n    const fetchMenus = async (diningHall, date, meal) => {\n        diningHall = diningHall.replace(' ', '%20')\n        meal = meal.toUpperCase();\n\n        console.log(diningHall)\n        console.log(date)\n        console.log(meal)\n\n        // getMenus(diningHall, date, meal, setMenus)\n        console.log(menus)\n        const data = await getMenus(diningHall, date, meal)\n        await setMenus(data)\n    }\n\n    const updateMenus = () => {\n        // tempFoodDisplay = {}\n        let tempFoodDisplay = {}\n        let tempFoodAmounts = {}\n        let tempFoodFacts = {}\n        console.log(menus)\n        if(!('category' in menus[0])){\n            props.setValidMenu(false)\n            props.onFoodHandler({}, {}, {})\n            return;\n        }\n        props.setValidMenu(true)\n        menus[0].category.map((categoryItem, index) => {\n            // foodAmounts[categoryItem.name] = 0\n            let tempCategoryObject = {}\n            let tempFoodFactsSingle = {}\n            tempCategoryObject[categoryItem.name] = []\n            categoryItem.menuItem.map((menuItem, index) => {\n                const tempMenuItem = {}\n                tempMenuItem[menuItem.name] = 0\n                tempFoodAmounts = ({...tempFoodAmounts, ...tempMenuItem})\n                tempCategoryObject[categoryItem.name].push(menuItem.name)\n                let foodFactsObject = {}\n                foodFactsObject[menuItem.name] = {}\n                if('nutritionalInfo' in menuItem.itemSizes[0]){\n                    menuItem.itemSizes[0].nutritionalInfo.map((nutritionalItem, index) => {\n                        // foodFactsObject[menuItem.name][\"Beef\"] = \"three\"\n                        // console.log(nutritionalItem.value)\n                        // let includeItem = false\n                        if (nutritionalItem.name === \"Calories\"){\n                            // console.log(nutritionalItem.value)\n                            // includeItem = true\n                            foodFactsObject[menuItem.name][nutritionalItem.name] = nutritionalItem.value    \n                        }\n                        else if (nutritionalItem.name === \"Protein\"){\n                            // includeItem = true\n                            foodFactsObject[menuItem.name][nutritionalItem.name] = nutritionalItem.value    \n                        }\n                        else if (nutritionalItem.name === \"Total Carbohydrate\"){\n                            // includeItem = true\n                            foodFactsObject[menuItem.name][nutritionalItem.name] = nutritionalItem.value    \n                        }\n                        else if (nutritionalItem.name === \"Total Fat\"){\n                            // includeItem = true\n                            foodFactsObject[menuItem.name][nutritionalItem.name] = nutritionalItem.value    \n                        }\n\n                        // foodFacts[menuItem.name][nutritionalItem.name] = nutritionalItem.value\n                        // const newFoodFacts = {\n                        //     ...foodFacts,\n                        //     ...(includeItem && {\"three\": nutritionalItem['value']})\n                        // }\n                        // foodFacts = newFoodFacts\n                    })\n                    tempFoodFactsSingle = {...tempFoodFactsSingle, ...foodFactsObject}\n                }\n                else{\n                    console.log(`${menuItem.name} is missing nutrition facts`)\n                }\n                // setFoodFacts({...foodFacts, ...foodFactsObject})\n            })\n            tempFoodFacts = {...tempFoodFacts, ...tempFoodFactsSingle}\n            console.log(tempFoodFacts)\n            // console.log(tempCategoryObject)\n            tempFoodDisplay = {...tempFoodDisplay, ...tempCategoryObject}\n        })\n\n        props.onFoodHandler(tempFoodDisplay, tempFoodAmounts, tempFoodFacts)\n    }\n\n    return (\n        <div>\n            <form onSubmit={handleSubmit} className=\"main-form\">\n                <label>\n                    Dining Hall:\n                    <select value={diningHall} onChange={handleDiningHallChange}>\n                        <option defaultValue=\"Bursley\">Bursley</option>\n                        <option value=\"South Quad\">South Quad</option>\n                        <option value=\"East Quad\">East Quad</option>\n                        <option value=\"Mosher Jordan\">Mosher Jordan</option>\n                    </select>\n                </label>\n                <label>\n                    Date:\n                    <input type=\"date\" value={date} onChange={handleDateChange} />\n                </label>\n                <label>\n                    Meal:\n                    <select value={meal} onChange={handleMealChange} className=\"custom-select\">\n                        <option value=\"Breakfast\">Breakfast</option>\n                        <option value=\"Brunch\">Brunch</option>\n                        <option value=\"Lunch\">Lunch</option>\n                        <option value=\"Linner\">Linner</option>\n                        <option value=\"Dinner\">Dinner</option>\n                    </select>\n                </label>\n            </form>\n            <button className=\"buttons\" onClick={() => fetchMenus(diningHall, date, meal)}>Generate Menu</button>\n            {/* <button className=\"buttons\" onClick={() => updateMenus()}>Update Menus</button> */}\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}